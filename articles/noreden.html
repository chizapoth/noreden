<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Introduction to `noreden` • noreden</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to `noreden`">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">noreden</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/noreden.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/andreaczhang/noreden/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Introduction to `noreden`</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/andreaczhang/noreden/blob/main/vignettes/noreden.Rmd" class="external-link"><code>vignettes/noreden.Rmd</code></a></small>
      <div class="d-none name"><code>noreden.Rmd</code></div>
    </div>

    
    
<p><code>noreden</code> provides user-friendly functions to facilitate
sustainable diet discovery. Given information for food (groups) and
their nutritional and environmental impact information, the aim is to
find a new diet (i.e. set of foods) that is healthy, acceptable, yet
more sustainable in terms of environmental impact.</p>
<p>The optimization problem implemented minimizes the <strong>difference
between the current and new target diet</strong>, subject to a set of
inequality constraints with respect to nutrition and environmental
impact. More details can be found in this document: <a href="https://ocbe-uio.github.io/noreden_doc/documentation/" class="external-link">Optimization
for NorEden</a>.</p>
<p>In order to find a new diet, you need the following input data:</p>
<ul>
<li>
<strong>current diet</strong>: food group names and intake (gram)
for each food group</li>
<li>
<strong>nutrition (per unit)</strong>: used to compute total
nutrition, such as energy, protein.</li>
<li>
<strong>environment impact (per unit)</strong>: used to compute
total impact, such as ghge (green house gas emission)</li>
<li>
<strong>constraint</strong>: we implement two inequality constraints
for each nutrition / env impact, such that the total amount
(‘contribution’) falls within a range. In this package the values are
based on current diet’s total contribution.</li>
</ul>
<div class="section level2">
<h2 id="an-example">An example<a class="anchor" aria-label="anchor" href="#an-example"></a>
</h2>
<p>We use a simple example to demonstrate the main features of the
package. To get started, load the package.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://andreaczhang.github.io/noreden/">noreden</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: ggplot2</span></span></code></pre></div>
<div class="section level3">
<h3 id="process-input">Process input<a class="anchor" aria-label="anchor" href="#process-input"></a>
</h3>
<p>We need some information on the current diet we wish to optimize. For
now, we use the <strong>average diet</strong> summarized from a
Norwegian dietary survey. However in the future, we shall implement
flexible input options so that you can insert the data yourself.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">all_diet</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 4</span></span></span>
<span><span class="co">#&gt;   food_name    intake_mean intake_lwr intake_upr</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Bread             188.       18.8        344. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Other grains       48.3       4.83       156. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Cakes              38.2       3.82       142. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Potatoes           72.8       7.28       231. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Vegetables        166.       16.6        420. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> Legumes             3.76      0.376       30.7</span></span></code></pre></div>
<p>We also need the <strong>contribution per unit</strong> (referred to
as <code>cpu</code>) for each of the food. The food unit is per gram,
and units for nutrition and environmental impact depends on the
outcome.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">contrib_per_unit</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 10</span></span></span>
<span><span class="co">#&gt;   food_name    energy protein  carbs   sugar  fiber     fat vitaminc calcium</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Bread         10.7   0.091<span style="text-decoration: underline;">2</span> 0.441  0.002<span style="text-decoration: underline;">85</span> 0.063<span style="text-decoration: underline;">3</span> 0.030<span style="text-decoration: underline;">2</span>   0.005<span style="text-decoration: underline;">70</span>  0.336 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Other grains  14.0   0.1    0.607  0.013<span style="text-decoration: underline;">3</span>  0.057<span style="text-decoration: underline;">8</span> 0.042<span style="text-decoration: underline;">2</span>   0        0.4   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Cakes         14.2   0.067<span style="text-decoration: underline;">4</span> 0.424  0.185   0.022<span style="text-decoration: underline;">5</span> 0.152    0        0.590 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Potatoes       3.79  0.020<span style="text-decoration: underline;">6</span> 0.178  0       0.017<span style="text-decoration: underline;">7</span> 0.007<span style="text-decoration: underline;">37</span>  0.133    0.088<span style="text-decoration: underline;">5</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Vegetables     1.57  0.014<span style="text-decoration: underline;">9</span> 0.049<span style="text-decoration: underline;">8</span> 0.005<span style="text-decoration: underline;">17</span> 0.020<span style="text-decoration: underline;">7</span> 0.008<span style="text-decoration: underline;">41</span>  0.207    0.259 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> Legumes        8.57  0.143  0.286  0       0.085<span style="text-decoration: underline;">7</span> 0.028<span style="text-decoration: underline;">6</span>   0        0.571 </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: ghge &lt;dbl&gt;</span></span></span></code></pre></div>
<div class="section level4">
<h4 id="select-food-and-outcomes-of-interest">Select food and outcomes of interest<a class="anchor" aria-label="anchor" href="#select-food-and-outcomes-of-interest"></a>
</h4>
<p>We select 12 foods, and 5 outcomes of interest.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tag_food_12</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Bread'</span>, <span class="st">'Vegetables'</span>, <span class="st">'Red meat'</span>, </span>
<span>                <span class="st">'Milk, yoghurt'</span>, <span class="st">'Fish'</span>, <span class="st">'Cheese'</span>, </span>
<span>                <span class="st">'Eggs'</span>, <span class="st">'Fruit, berries'</span>, <span class="st">'Potatoes'</span>, </span>
<span>                <span class="st">'Other grains'</span>, <span class="st">'Butter, margarine, oil'</span>, <span class="st">'Sugar, sweets'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tag_outcome_5</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'energy'</span>, <span class="st">'protein'</span>, <span class="st">'carbs'</span>, <span class="st">'fat'</span>, <span class="st">'ghge'</span><span class="op">)</span></span></code></pre></div>
<p>For the current diet selection, we get the average diet
(<code>intake_mean</code>) as a baseline, from which we search for a new
diet that satisfy our requirements; in addition, we also get the upper
and lower bound for the new diet so that it is not too far from the
current one.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">diet_selected</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/select_diet.html">select_diet</a></span><span class="op">(</span></span>
<span>  data_diet <span class="op">=</span> <span class="va">all_diet</span>,</span>
<span>  tag_food <span class="op">=</span> <span class="va">tag_food_12</span><span class="op">)</span></span>
<span></span>
<span><span class="va">diet_selected</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 12 × 4</span></span></span>
<span><span class="co">#&gt;    food_name              intake_mean intake_lwr intake_upr</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Bread                        188.       18.8       344. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Other grains                  48.3       4.83      156. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Potatoes                      72.8       7.28      231. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Vegetables                   166.       16.6       420. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Fruit, berries               184.       18.4       553. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Red meat                     126.       12.6       300. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Fish                          74.6       7.46      303. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Eggs                          26.4       2.64      112. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Milk, yoghurt                329.       32.9       901. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Cheese                        46.6       4.66      122. </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> Butter, margarine, oil        32.3       3.23       71.4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> Sugar, sweets                 18.1       1.81       66</span></span></code></pre></div>
<p>Do the same for outcomes on selected foods.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cpu_selected</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/select_perunit.html">select_perunit</a></span><span class="op">(</span></span>
<span>  data_perunit_contrib <span class="op">=</span> <span class="va">contrib_per_unit</span>, </span>
<span>  tag_food <span class="op">=</span> <span class="va">tag_food_12</span>, </span>
<span>  tag_outcome <span class="op">=</span> <span class="va">tag_outcome_5</span><span class="op">)</span></span>
<span><span class="va">cpu_selected</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 12 × 6</span></span></span>
<span><span class="co">#&gt;    food_name              energy protein   carbs     fat    ghge</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Bread                   10.7  0.091<span style="text-decoration: underline;">2</span>  0.441   0.030<span style="text-decoration: underline;">2</span>  0.001<span style="text-decoration: underline;">07</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Other grains            14.0  0.1     0.607   0.042<span style="text-decoration: underline;">2</span>  0.002<span style="text-decoration: underline;">35</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Potatoes                 3.79 0.020<span style="text-decoration: underline;">6</span>  0.178   0.007<span style="text-decoration: underline;">37</span> 0.000<span style="text-decoration: underline;">37</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Vegetables               1.57 0.014<span style="text-decoration: underline;">9</span>  0.049<span style="text-decoration: underline;">8</span>  0.008<span style="text-decoration: underline;">41</span> 0.001<span style="text-decoration: underline;">03</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Fruit, berries           2.73 0.007<span style="text-decoration: underline;">58</span> 0.134   0.004<span style="text-decoration: underline;">08</span> 0.000<span style="text-decoration: underline;">72</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Red meat                 8.34 0.173   0.013<span style="text-decoration: underline;">6</span>  0.139   0.012<span style="text-decoration: underline;">9</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Fish                     6.09 0.170   0.024<span style="text-decoration: underline;">5</span>  0.074<span style="text-decoration: underline;">8</span>  0.003<span style="text-decoration: underline;">11</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Eggs                     6.18 0.130   0.004<span style="text-decoration: underline;">07</span> 0.106   0.002<span style="text-decoration: underline;">15</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Milk, yoghurt            1.98 0.035<span style="text-decoration: underline;">9</span>  0.055<span style="text-decoration: underline;">9</span>  0.011<span style="text-decoration: underline;">1</span>  0.001<span style="text-decoration: underline;">43</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Cheese                  13.5  0.217   0.048<span style="text-decoration: underline;">4</span>  0.242   0.010<span style="text-decoration: underline;">3</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> Butter, margarine, oil  23.4  0.013<span style="text-decoration: underline;">3</span>  0.023<span style="text-decoration: underline;">3</span>  0.615   0.004<span style="text-decoration: underline;">67</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> Sugar, sweets           18.0  0.053<span style="text-decoration: underline;">3</span>  0.609   0.178   0.003<span style="text-decoration: underline;">87</span></span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="compute-total-contribution">Compute total contribution<a class="anchor" aria-label="anchor" href="#compute-total-contribution"></a>
</h3>
<p>We compute the total contribution of the food combination. This is
the basis when we search for new diet that satisfies the nutrition and
environmental constraints.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/compute_total_contrib.html">compute_total_contrib</a></span><span class="op">(</span></span>
<span>  data_diet <span class="op">=</span> <span class="va">diet_selected</span>, </span>
<span>  data_perunit_contrib <span class="op">=</span> <span class="va">cpu_selected</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tc</span></span>
<span><span class="co">#&gt; $total_contrib</span></span>
<span><span class="co">#&gt;   tag_outcome total_contrib</span></span>
<span><span class="co">#&gt; 1      energy   7762.508053</span></span>
<span><span class="co">#&gt; 2     protein     88.576337</span></span>
<span><span class="co">#&gt; 3       carbs    194.438480</span></span>
<span><span class="co">#&gt; 4         fat     74.404123</span></span>
<span><span class="co">#&gt; 5        ghge      3.739236</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $tag_food</span></span>
<span><span class="co">#&gt;  [1] "Bread"                  "Other grains"           "Potatoes"              </span></span>
<span><span class="co">#&gt;  [4] "Vegetables"             "Fruit, berries"         "Red meat"              </span></span>
<span><span class="co">#&gt;  [7] "Fish"                   "Eggs"                   "Milk, yoghurt"         </span></span>
<span><span class="co">#&gt; [10] "Cheese"                 "Butter, margarine, oil" "Sugar, sweets"         </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $tag_outcome</span></span>
<span><span class="co">#&gt; [1] "energy"  "protein" "carbs"   "fat"     "ghge"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="set-constraints">Set constraints<a class="anchor" aria-label="anchor" href="#set-constraints"></a>
</h3>
<p>The inequality constraints look like this:</p>
<ul>
<li>total energy &lt;= upper bound for energy</li>
<li>total energy &gt;= lower bound for energy</li>
</ul>
<p>By default we can set the upper bound to be the same as the current
total outputs, and lower bound to be 90% of the current total
outputs.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">constr_coef_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_constr_coef.html">set_constr_coef</a></span><span class="op">(</span></span>
<span>  tag_outcome <span class="op">=</span> <span class="va">tag_outcome_5</span>, </span>
<span>  coef_lwr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0.9</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">tag_outcome_5</span><span class="op">)</span><span class="op">)</span>, </span>
<span>  coef_upr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1.0</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">tag_outcome_5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">constr_coef_df</span></span>
<span><span class="co">#&gt;   tag_outcome coef_constrlwr coef_construpr</span></span>
<span><span class="co">#&gt; 1      energy            0.9              1</span></span>
<span><span class="co">#&gt; 2     protein            0.9              1</span></span>
<span><span class="co">#&gt; 3       carbs            0.9              1</span></span>
<span><span class="co">#&gt; 4         fat            0.9              1</span></span>
<span><span class="co">#&gt; 5        ghge            0.9              1</span></span></code></pre></div>
<p>When we try to reduce the output in a specific outcome (such as
ghge), we can set it to be 90% the previous level: the function
<code><a href="../reference/reduce_constr.html">reduce_constr()</a></code> allows you to set it.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># reduce ghge to 0.9</span></span>
<span><span class="va">constr_coef_df_red</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reduce_constr.html">reduce_constr</a></span><span class="op">(</span></span>
<span>  data_constr_coef <span class="op">=</span> <span class="va">constr_coef_df</span>, </span>
<span>  tag_outcome_reduce <span class="op">=</span> <span class="st">'ghge'</span>, </span>
<span>  coef_reduce <span class="op">=</span> <span class="fl">0.9</span><span class="op">)</span></span>
<span><span class="va">constr_coef_df_red</span></span>
<span><span class="co">#&gt;   tag_outcome coef_constrlwr coef_construpr</span></span>
<span><span class="co">#&gt; 1      energy           0.90            1.0</span></span>
<span><span class="co">#&gt; 2     protein           0.90            1.0</span></span>
<span><span class="co">#&gt; 3       carbs           0.90            1.0</span></span>
<span><span class="co">#&gt; 4         fat           0.90            1.0</span></span>
<span><span class="co">#&gt; 5        ghge           0.81            0.9</span></span></code></pre></div>
<p>Use total contribution and constraint coefficients to compute the
upper and lower bound.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">constr_val_reduce</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/compute_constr.html">compute_constr</a></span><span class="op">(</span></span>
<span>  data_total_contrib <span class="op">=</span> <span class="va">tc</span><span class="op">$</span><span class="va">total_contrib</span>, </span>
<span>  data_constr_coef <span class="op">=</span> <span class="va">constr_coef_df_red</span><span class="op">)</span></span>
<span><span class="va">constr_val_reduce</span></span>
<span><span class="co">#&gt;   tag_outcome total_contrib coef_constrlwr coef_construpr  constr_lwr</span></span>
<span><span class="co">#&gt; 1      energy   7762.508053           0.90            1.0 6986.257248</span></span>
<span><span class="co">#&gt; 2     protein     88.576337           0.90            1.0   79.718703</span></span>
<span><span class="co">#&gt; 3       carbs    194.438480           0.90            1.0  174.994632</span></span>
<span><span class="co">#&gt; 4         fat     74.404123           0.90            1.0   66.963711</span></span>
<span><span class="co">#&gt; 5        ghge      3.739236           0.81            0.9    3.028781</span></span>
<span><span class="co">#&gt;    constr_upr</span></span>
<span><span class="co">#&gt; 1 7762.508053</span></span>
<span><span class="co">#&gt; 2   88.576337</span></span>
<span><span class="co">#&gt; 3  194.438480</span></span>
<span><span class="co">#&gt; 4   74.404123</span></span>
<span><span class="co">#&gt; 5    3.365312</span></span></code></pre></div>
<div class="section level4">
<h4 id="set-standardized-constraints">Set standardized constraints<a class="anchor" aria-label="anchor" href="#set-standardized-constraints"></a>
</h4>
<p>Sometimes it is better for computaion to use standardized values
rather than the original. We have implemented one way to
standardize.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">stdcoef</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/compute_stdcoef.html">compute_stdcoef</a></span><span class="op">(</span>data_perunit_contrib <span class="op">=</span> <span class="va">cpu_selected</span><span class="op">)</span></span>
<span><span class="va">stdcoef</span></span>
<span><span class="co">#&gt; $std_coef</span></span>
<span><span class="co">#&gt;   tag_outcome    std_coef</span></span>
<span><span class="co">#&gt; 1      energy   0.1449335</span></span>
<span><span class="co">#&gt; 2     protein  13.7615608</span></span>
<span><span class="co">#&gt; 3       carbs   4.3037780</span></span>
<span><span class="co">#&gt; 4         fat   5.7738141</span></span>
<span><span class="co">#&gt; 5        ghge 251.6962095</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $method</span></span>
<span><span class="co">#&gt; [1] "sd"</span></span>
<span></span>
<span><span class="va">cpu_selected_std_res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/compute_std_unit_contrib.html">compute_std_unit_contrib</a></span><span class="op">(</span></span>
<span>  uc_raw <span class="op">=</span> <span class="va">cpu_selected</span>,</span>
<span>  std_coef <span class="op">=</span> <span class="va">stdcoef</span><span class="op">$</span><span class="va">std_coef</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cpu_selected_std</span> <span class="op">&lt;-</span> <span class="va">cpu_selected_std_res</span><span class="op">$</span><span class="va">uc_std</span></span>
<span></span>
<span><span class="co"># total contrib (std)</span></span>
<span><span class="va">tc_std</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/compute_total_contrib.html">compute_total_contrib</a></span><span class="op">(</span></span>
<span>  data_diet <span class="op">=</span> <span class="va">diet_selected</span>, </span>
<span>  data_perunit_contrib <span class="op">=</span> <span class="va">cpu_selected_std</span><span class="op">)</span></span>
<span><span class="va">tc_std</span></span>
<span><span class="co">#&gt; $total_contrib</span></span>
<span><span class="co">#&gt;   tag_outcome total_contrib</span></span>
<span><span class="co">#&gt; 1      energy     1125.0477</span></span>
<span><span class="co">#&gt; 2     protein     1218.9486</span></span>
<span><span class="co">#&gt; 3       carbs      836.8200</span></span>
<span><span class="co">#&gt; 4         fat      429.5956</span></span>
<span><span class="co">#&gt; 5        ghge      941.1514</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $tag_food</span></span>
<span><span class="co">#&gt;  [1] "Bread"                  "Other grains"           "Potatoes"              </span></span>
<span><span class="co">#&gt;  [4] "Vegetables"             "Fruit, berries"         "Red meat"              </span></span>
<span><span class="co">#&gt;  [7] "Fish"                   "Eggs"                   "Milk, yoghurt"         </span></span>
<span><span class="co">#&gt; [10] "Cheese"                 "Butter, margarine, oil" "Sugar, sweets"         </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $tag_outcome</span></span>
<span><span class="co">#&gt; [1] "energy"  "protein" "carbs"   "fat"     "ghge"</span></span></code></pre></div>
<p>Now we directly use the 90% ghge constraint coefficients.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># constraints based on std total contrib</span></span>
<span><span class="va">constr_val_reduce_std</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/compute_constr.html">compute_constr</a></span><span class="op">(</span></span>
<span>  data_total_contrib <span class="op">=</span> <span class="va">tc_std</span><span class="op">$</span><span class="va">total_contrib</span>, </span>
<span>  data_constr_coef <span class="op">=</span> <span class="va">constr_coef_df_red</span><span class="op">)</span></span>
<span></span>
<span><span class="va">constr_val_reduce_std</span></span>
<span><span class="co">#&gt;   tag_outcome total_contrib coef_constrlwr coef_construpr constr_lwr constr_upr</span></span>
<span><span class="co">#&gt; 1      energy     1125.0477           0.90            1.0  1012.5430  1125.0477</span></span>
<span><span class="co">#&gt; 2     protein     1218.9486           0.90            1.0  1097.0538  1218.9486</span></span>
<span><span class="co">#&gt; 3       carbs      836.8200           0.90            1.0   753.1380   836.8200</span></span>
<span><span class="co">#&gt; 4         fat      429.5956           0.90            1.0   386.6360   429.5956</span></span>
<span><span class="co">#&gt; 5        ghge      941.1514           0.81            0.9   762.3326   847.0363</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="find-new-diet">Find new diet<a class="anchor" aria-label="anchor" href="#find-new-diet"></a>
</h3>
<p>In order to run the algorithm to search for new diet, we need to
provide the algorithm the data we prepared from previous steps in a
format that is ordered by outcome.</p>
<p>Here we use the standardized constraints for numerical stability.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># split constraint values </span></span>
<span><span class="va">constval</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/values_by_tag_outcome.html">values_by_tag_outcome</a></span><span class="op">(</span></span>
<span>  data_unit_contrib <span class="op">=</span> <span class="va">cpu_selected_std</span>, </span>
<span>  data_constr <span class="op">=</span> <span class="va">constr_val_reduce_std</span><span class="op">)</span></span>
<span></span>
<span><span class="va">constval</span><span class="op">$</span><span class="va">food_name</span></span>
<span><span class="co">#&gt;  [1] "Bread"                  "Other grains"           "Potatoes"              </span></span>
<span><span class="co">#&gt;  [4] "Vegetables"             "Fruit, berries"         "Red meat"              </span></span>
<span><span class="co">#&gt;  [7] "Fish"                   "Eggs"                   "Milk, yoghurt"         </span></span>
<span><span class="co">#&gt; [10] "Cheese"                 "Butter, margarine, oil" "Sugar, sweets"</span></span>
<span><span class="va">constval</span><span class="op">$</span><span class="va">tag_outcome</span></span>
<span><span class="co">#&gt; [1] "energy"  "protein" "carbs"   "fat"     "ghge"</span></span>
<span></span>
<span><span class="co"># for energy, unit_contrib per food, lwr and upr bound of total contrib</span></span>
<span><span class="va">constval</span><span class="op">$</span><span class="va">val</span><span class="op">$</span><span class="va">energy</span></span>
<span><span class="co">#&gt; $unit_contrib</span></span>
<span><span class="co">#&gt;  [1] 1.5501443 2.0322902 0.5493793 0.2268688 0.3955038 1.2090119 0.8821135</span></span>
<span><span class="co">#&gt;  [8] 0.8955243 0.2869315 1.9569367 3.3898076 2.6070884</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $lwr</span></span>
<span><span class="co">#&gt; [1] 1012.543</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $upr</span></span>
<span><span class="co">#&gt; [1] 1125.048</span></span></code></pre></div>
<p>Run the optimization, and retrieve the new diet along with current
diet.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/find_new_diet.html">find_new_diet</a></span><span class="op">(</span>diet0 <span class="op">=</span> <span class="va">diet_selected</span><span class="op">$</span><span class="va">intake_mean</span>, </span>
<span>                     diet0_upr <span class="op">=</span> <span class="va">diet_selected</span><span class="op">$</span><span class="va">intake_upr</span>, </span>
<span>                     diet0_lwr <span class="op">=</span> <span class="va">diet_selected</span><span class="op">$</span><span class="va">intake_lwr</span>, </span>
<span>                     tag_outcomes <span class="op">=</span> <span class="va">tag_outcome_5</span>, </span>
<span>                     constraint_val <span class="op">=</span> <span class="va">constval</span><span class="op">$</span><span class="va">val</span>, </span>
<span>                     print_runtime <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span><span class="co"># collect result</span></span>
<span><span class="va">new_diet</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/return_new_diet.html">return_new_diet</a></span><span class="op">(</span></span>
<span>  result_obj <span class="op">=</span> <span class="va">res</span><span class="op">$</span><span class="va">run_optim</span>, </span>
<span>  data_current_diet <span class="op">=</span> <span class="va">diet_selected</span><span class="op">)</span></span>
<span><span class="va">new_diet</span></span>
<span><span class="co">#&gt;                 food_name       new   current</span></span>
<span><span class="co">#&gt; 1                   Bread 187.17654 188.31866</span></span>
<span><span class="co">#&gt; 2            Other grains  45.54482  48.31437</span></span>
<span><span class="co">#&gt; 3                Potatoes  72.36000  72.79364</span></span>
<span><span class="co">#&gt; 4              Vegetables 164.72697 165.98669</span></span>
<span><span class="co">#&gt; 5          Fruit, berries 183.26749 184.13142</span></span>
<span><span class="co">#&gt; 6                Red meat 110.48644 126.26154</span></span>
<span><span class="co">#&gt; 7                    Fish  71.14010  74.61885</span></span>
<span><span class="co">#&gt; 8                    Eggs  24.35871  26.41185</span></span>
<span><span class="co">#&gt; 9           Milk, yoghurt 326.87761 328.64505</span></span>
<span><span class="co">#&gt; 10                 Cheese  35.02705  46.59652</span></span>
<span><span class="co">#&gt; 11 Butter, margarine, oil  30.52353  32.31694</span></span>
<span><span class="co">#&gt; 12          Sugar, sweets  14.35095  18.14473</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="present-the-results">Present the results<a class="anchor" aria-label="anchor" href="#present-the-results"></a>
</h3>
<p>We can show some useful comparisons between the two diets, in terms
of absolute and relative percent change.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># compute difference</span></span>
<span><span class="va">new_old_compare</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/compare_new_diet.html">compare_new_diet</a></span><span class="op">(</span>data_new_diet <span class="op">=</span> <span class="va">new_diet</span>, </span>
<span>                 data_current_diet <span class="op">=</span> <span class="va">diet_selected</span><span class="op">)</span></span>
<span></span>
<span><span class="va">new_old_compare</span></span>
<span><span class="co">#&gt;                 food_name    new current current_lwr current_upr abs_change</span></span>
<span><span class="co">#&gt; 1                   Bread 187.18  188.32       18.83       343.8      -1.14</span></span>
<span><span class="co">#&gt; 2            Other grains  45.54   48.31        4.83       155.7      -2.77</span></span>
<span><span class="co">#&gt; 3                Potatoes  72.36   72.79        7.28       230.7      -0.43</span></span>
<span><span class="co">#&gt; 4              Vegetables 164.73  165.99       16.60       419.7      -1.26</span></span>
<span><span class="co">#&gt; 5          Fruit, berries 183.27  184.13       18.41       552.7      -0.86</span></span>
<span><span class="co">#&gt; 6                Red meat 110.49  126.26       12.63       299.6     -15.78</span></span>
<span><span class="co">#&gt; 7                    Fish  71.14   74.62        7.46       302.9      -3.48</span></span>
<span><span class="co">#&gt; 8                    Eggs  24.36   26.41        2.64       111.6      -2.05</span></span>
<span><span class="co">#&gt; 9           Milk, yoghurt 326.88  328.65       32.86       900.6      -1.77</span></span>
<span><span class="co">#&gt; 10                 Cheese  35.03   46.60        4.66       121.6     -11.57</span></span>
<span><span class="co">#&gt; 11 Butter, margarine, oil  30.52   32.32        3.23        71.4      -1.79</span></span>
<span><span class="co">#&gt; 12          Sugar, sweets  14.35   18.14        1.81        66.0      -3.79</span></span>
<span><span class="co">#&gt;    percent_change</span></span>
<span><span class="co">#&gt; 1           -0.01</span></span>
<span><span class="co">#&gt; 2           -0.06</span></span>
<span><span class="co">#&gt; 3           -0.01</span></span>
<span><span class="co">#&gt; 4           -0.01</span></span>
<span><span class="co">#&gt; 5            0.00</span></span>
<span><span class="co">#&gt; 6           -0.12</span></span>
<span><span class="co">#&gt; 7           -0.05</span></span>
<span><span class="co">#&gt; 8           -0.08</span></span>
<span><span class="co">#&gt; 9           -0.01</span></span>
<span><span class="co">#&gt; 10          -0.25</span></span>
<span><span class="co">#&gt; 11          -0.06</span></span>
<span><span class="co">#&gt; 12          -0.21</span></span></code></pre></div>
<p>We can also validate whether the new diet satisfies the
constraints.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># validate constraints</span></span>
<span><span class="va">new_diet_validate</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/validate_diet_contrib.html">validate_diet_contrib</a></span><span class="op">(</span>data_new_diet <span class="op">=</span> <span class="va">new_diet</span>, </span>
<span>                      data_unit_contrib <span class="op">=</span> <span class="va">cpu_selected</span>,</span>
<span>                      data_constr <span class="op">=</span> <span class="va">constr_val_reduce</span><span class="op">)</span></span>
<span></span>
<span><span class="va">new_diet_validate</span></span>
<span><span class="co">#&gt;   tag_outcome total_contrib_new total_contrib coef_constrlwr coef_construpr</span></span>
<span><span class="co">#&gt; 1      energy           7270.13       7762.51           0.90            1.0</span></span>
<span><span class="co">#&gt; 2     protein             81.78         88.58           0.90            1.0</span></span>
<span><span class="co">#&gt; 3       carbs            188.68        194.44           0.90            1.0</span></span>
<span><span class="co">#&gt; 4         fat             66.96         74.40           0.90            1.0</span></span>
<span><span class="co">#&gt; 5        ghge              3.37          3.74           0.81            0.9</span></span>
<span><span class="co">#&gt;   constr_lwr constr_upr check deviation</span></span>
<span><span class="co">#&gt; 1    6986.26    7762.51    ok         0</span></span>
<span><span class="co">#&gt; 2      79.72      88.58    ok         0</span></span>
<span><span class="co">#&gt; 3     174.99     194.44    ok         0</span></span>
<span><span class="co">#&gt; 4      66.96      74.40    ok         0</span></span>
<span><span class="co">#&gt; 5       3.03       3.37    ok         0</span></span></code></pre></div>
<p>It is possible to visualize the results or present results in better
looking tables.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d_compare_gram</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/prep_diet_comparison_gram.html">prep_diet_comparison_gram</a></span><span class="op">(</span></span>
<span>  <span class="va">new_old_compare</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_diet_comparison_gram.html">plot_diet_comparison_gram</a></span><span class="op">(</span>plot_obj <span class="op">=</span> <span class="va">d_compare_gram</span>,</span>
<span>                          title_text <span class="op">=</span> <span class="st">'New diet'</span>,</span>
<span>                          axis_x_text <span class="op">=</span> <span class="st">'Food groups'</span>,</span>
<span>                          axis_y_text <span class="op">=</span> <span class="st">'Intake (grams)'</span><span class="op">)</span></span>
<span><span class="va">p1</span></span></code></pre></div>
<p><img src="noreden_files/figure-html/unnamed-chunk-17-1.png" width="700"></p>
<p>Table with comments.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d_tb_validate</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/prep_validate_table.html">prep_validate_table</a></span><span class="op">(</span></span>
<span>  data_validate_diet <span class="op">=</span> <span class="va">new_diet_validate</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/table_validate.html">table_validate</a></span><span class="op">(</span><span class="va">d_tb_validate</span><span class="op">)</span></span></code></pre></div>
<div id="mwlefoodfi" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#mwlefoodfi table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#mwlefoodfi thead, #mwlefoodfi tbody, #mwlefoodfi tfoot, #mwlefoodfi tr, #mwlefoodfi td, #mwlefoodfi th {
  border-style: none;
}

#mwlefoodfi p {
  margin: 0;
  padding: 0;
}

#mwlefoodfi .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#mwlefoodfi .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#mwlefoodfi .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#mwlefoodfi .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#mwlefoodfi .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mwlefoodfi .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mwlefoodfi .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mwlefoodfi .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#mwlefoodfi .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#mwlefoodfi .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#mwlefoodfi .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#mwlefoodfi .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#mwlefoodfi .gt_spanner_row {
  border-bottom-style: hidden;
}

#mwlefoodfi .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#mwlefoodfi .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#mwlefoodfi .gt_from_md > :first-child {
  margin-top: 0;
}

#mwlefoodfi .gt_from_md > :last-child {
  margin-bottom: 0;
}

#mwlefoodfi .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#mwlefoodfi .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#mwlefoodfi .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#mwlefoodfi .gt_row_group_first td {
  border-top-width: 2px;
}

#mwlefoodfi .gt_row_group_first th {
  border-top-width: 2px;
}

#mwlefoodfi .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mwlefoodfi .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#mwlefoodfi .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#mwlefoodfi .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mwlefoodfi .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mwlefoodfi .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#mwlefoodfi .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#mwlefoodfi .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#mwlefoodfi .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mwlefoodfi .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mwlefoodfi .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mwlefoodfi .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mwlefoodfi .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mwlefoodfi .gt_left {
  text-align: left;
}

#mwlefoodfi .gt_center {
  text-align: center;
}

#mwlefoodfi .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#mwlefoodfi .gt_font_normal {
  font-weight: normal;
}

#mwlefoodfi .gt_font_bold {
  font-weight: bold;
}

#mwlefoodfi .gt_font_italic {
  font-style: italic;
}

#mwlefoodfi .gt_super {
  font-size: 65%;
}

#mwlefoodfi .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#mwlefoodfi .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#mwlefoodfi .gt_indent_1 {
  text-indent: 5px;
}

#mwlefoodfi .gt_indent_2 {
  text-indent: 10px;
}

#mwlefoodfi .gt_indent_3 {
  text-indent: 15px;
}

#mwlefoodfi .gt_indent_4 {
  text-indent: 20px;
}

#mwlefoodfi .gt_indent_5 {
  text-indent: 25px;
}

#mwlefoodfi .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#mwlefoodfi div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings gt_spanner_row">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col" id="tag_outcome">Outcome</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="**Total contribution**">
        <div class="gt_column_spanner"><span class="gt_from_md"><strong>Total contribution</strong></span></div>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2" scope="colgroup" id="**Constraint**">
        <div class="gt_column_spanner"><span class="gt_from_md"><strong>Constraint</strong></span></div>
      </th>
    </tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="tc_new">New diet</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="tc_current">Current diet</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="min">Range</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="check">Comments</th>
    </tr>
</thead>
<tbody class="gt_table_body">
<tr>
<td headers="tag_outcome" class="gt_row gt_left">energy</td>
<td headers="tc_new" class="gt_row gt_right" style="font-weight: bold;">7270.13</td>
<td headers="tc_current" class="gt_row gt_right">7762.51</td>
<td headers="min" class="gt_row gt_right">6986.26&amp;dash;7762.51</td>
<td headers="check" class="gt_row gt_center">Ok</td>
</tr>
<tr>
<td headers="tag_outcome" class="gt_row gt_left">protein</td>
<td headers="tc_new" class="gt_row gt_right" style="font-weight: bold;">81.78</td>
<td headers="tc_current" class="gt_row gt_right">88.58</td>
<td headers="min" class="gt_row gt_right">79.72&amp;dash;88.58</td>
<td headers="check" class="gt_row gt_center">Ok</td>
</tr>
<tr>
<td headers="tag_outcome" class="gt_row gt_left">carbs</td>
<td headers="tc_new" class="gt_row gt_right" style="font-weight: bold;">188.68</td>
<td headers="tc_current" class="gt_row gt_right">194.44</td>
<td headers="min" class="gt_row gt_right">174.99&amp;dash;194.44</td>
<td headers="check" class="gt_row gt_center">Ok</td>
</tr>
<tr>
<td headers="tag_outcome" class="gt_row gt_left">fat</td>
<td headers="tc_new" class="gt_row gt_right" style="font-weight: bold;">66.96</td>
<td headers="tc_current" class="gt_row gt_right">74.40</td>
<td headers="min" class="gt_row gt_right">66.96&amp;dash;74.40</td>
<td headers="check" class="gt_row gt_center">Ok</td>
</tr>
<tr>
<td headers="tag_outcome" class="gt_row gt_left">ghge</td>
<td headers="tc_new" class="gt_row gt_right" style="font-weight: bold;">3.37</td>
<td headers="tc_current" class="gt_row gt_right">3.74</td>
<td headers="min" class="gt_row gt_right">3.03&amp;dash;3.37</td>
<td headers="check" class="gt_row gt_center">Ok</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Chi Zhang, Julie Marie Lengle.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
